version: 2

models:
  - name: customers_db_customers_snapshots_base
    description: This is the base model for snapshotted customers data from the customers.gitlab.com database.  Hard deletes are handled correctly here starting on Jun 8, 2020.
    columns:
      - name: customer_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt
        tests:
          - not_null
          - unique
      - name: customer_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
  - name: customers_db_orders_snapshots_base
    description: This is the base model for snapshotted orders data from the customers.gitlab.com database. Hard deletes are handled correctly here starting on Jun 8, 2020.
    columns:
      - name: order_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt
        tests:
          - not_null
          - unique
      - name: order_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
  - name: gitlab_dotcom_gitlab_subscriptions_snapshots_base
    description: This is the base model for snapshotted gitlab subscriptions data from the gitlab.com database. Hard deletes are handled correctly here starting on Jun 8, 2020.
    columns:
      - name: gitlab_subscription_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt
        tests:
          - not_null
          - unique
      - name: gitlab_subscription_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
  - name: gitlab_dotcom_members_snapshots_base
    description: This is the base model for snapshotted members data from the gitlab.com database. Hard deletes are handled correctly here starting on Jun 8, 2020.
    columns:
      - name: member_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt
        tests:
          - not_null
          - unique
      - name: member_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
  - name: gitlab_dotcom_namespaces_snapshots_base
    description: This is the base model for snapshotted gitlab subscriptions data from the gitlab.com database. Hard deletes are handled correctly here starting on Jun 8, 2020.
    columns:
      - name: namespace_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt
        tests:
          - not_null
          - unique
      - name: namespace_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to


  - name: gitlab_dotcom_project_statistics_snapshots_base
    description: Base model for Gitlab.com project statistics snapshot
    columns:
      - name: project_statistics_id
        tests:
          - not_null
      - name: project_id
        tests:
          - not_null

  - name: license_db_licenses_snapshots_base
    description: This is the base model for snapshots from the licenses table from the license database.
    columns:
      - name: license_snapshot_id
        description: Auto-generated primary key when building the snapshot with dbt.
        tests:
          - not_null
          - unique
      - name: license_id
        tests:
          - not_null
      - name: valid_from
        tests:
          - not_null
      - name: valid_to
  - name: sfdc_account_snapshots_base
    description: This is the base model for snapshots of the salesforce account table for 2019-10-01 and forward.
    columns:
      - name: unique_key
        tests:
          - not_null
          - unique
      - name: account_snapshot_id
        tests:
          - not_null
      - name: id
          - not_null
      - name: valid_from
          - not_null
  - name: sfdc_opportunity_snapshots_base
    description: This is the base model for snapshots of the salesforce opportunity table for 2019-10-01 and forward.
    columns:
      - name: unique_key
        tests:
          - not_null
          - unique
      - name: opportunity_snapshot_id
        tests:
          - not_null
      - name: id
          - not_null
      - name: valid_from
          - not_null
